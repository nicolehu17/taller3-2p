<!DOCTYPE html>
<html lang="en">

<head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap4.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap4.min.js"></script>
</head>

<body>
    <% include("partials/nav") %>

    <div class="container">
        <h1>Tabla de Pedidos</h1>
        <table id="example" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Cliente</th>
                    <th>Fecha</th>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Total</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                <% arrPedidos.forEach((pedido) => { %>
                    <% pedido.prodxpedidos.forEach((prodxpedido) => { %>
                        <tr>
                            <td><%= pedido.id %></td>
                            <td><%= pedido.cliente.nombre + ' ' + pedido.cliente.apellido %></td>
                            <td><%= pedido.fecha %></td>
                            <td><%= prodxpedido.producto.descripcion %></td>
                            <td><%= prodxpedido.cantidad %></td>
                            <td><%= prodxpedido.precio %></td>
                            <td><%= pedido.estado %></td>
                        </tr>
                    <% }); %>
                <% }); %>
            </tbody>
        </table>
    </div>

    <script>
        $(document).ready(function () {
            $('#example').DataTable();
        });
    </script>

    <% include("partials/footer") %>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
